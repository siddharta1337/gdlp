$(document).ready(function(){$(document.body).transition("init").show()});
(function(b){function s(a){var b=a.indexOf("?");0<b&&(a=a.slice(0,b));return a.replace(/[:\.\+\/]/g,"_")}var l=0,v=!1,m=null,q={},w=window.location.href,x={},c=null,r=[],u={options:function(a){m=b.extend({defaultPageTransition:"fade",domCache:!1},a)},init:function(a,e,g){v||(v=!0,b(document.body).transition("options",{}),b(window).on("hashchange",function(){var a=c&&c.element||b(document.body);if(!x[window.location.hash]){var e=window.location.hash;c&&(c.element&&c.element.is("form"))&&(e={type:c.element.attr("method")||
"get",url:window.location.hash.slice(1),data:c.element.serialize(),dataType:"html",global:!1});var f=null,d=null==c,g=0;if(d)f=(c=r.length?r.pop():null)?c.transition:m.defaultPageTransition,d=c?!c.reverse:!0,c&&(g=c.top||0);else if(c.transition)f=c.transition,r.push({transition:f,top:b(window).scrollTop()}),d=c.reverse;else{f=c.element.attr("transition")||c.element.data("transition")||m.defaultPageTransition;if("reverse"===(c.element.attr("direction")||c.element.data("direction")))d=!0;r.push({transition:f,
reverse:d,top:b(window).scrollTop()})}a.transition("changePage",e,f,d,g)}c=null}));var f=b('div[data-role="page"]',this);f.length||(this.is("div")?(this.attr("data-role","page"),this.attr("id","_trans_div"+l),f=this):(f=b('<div data-role="page" id="_trans_div'+l+'" />'),this.children().wrapAll(f)));a&&f.trigger("pageload",a);a=f.first();if(window.location.hash&&(a=b(s(window.location.hash)),!a.length)){a=f.first();var t=a.attr("id"),d=s(q[window.location.hash]||window.location.hash.slice(1));a.attr("id",
d);t&&(b('[data-href="#'+t+'"]',f).attr("data-href","#"+d),b('[href="#'+t+'"]',f).attr("href","#"+d))}f.addClass("ui-page");f.each(function(){b(this).attr("id")||b(this).attr("id","_trans_div"+l);q["#"+b(this).attr("id")]=w;b(this).css("zIndex",l++)});b("a[href]",f).not("[target]").not('[rel="external"]').not('[data-ajax="false"]').not("[data-href]").transition("hijackLinks");b("[data-href]",f).transition("hijackLinks");b("form").not("[target]").not('[data-ajax="false"]').transition("hijackLinks");
g||(g=document.title);f.not("[data-title]").data("title",g);if(g=a.data("title"))document.title=g;f.hide();e=(e=e?b(e):null)||a;e.addClass("ui-page-active");f.each(function(){b(this).trigger("pageinit",b(this))});return e},to:function(a,b,g){b=b||m.defaultPageTransition;g||(g=!1);c={transition:b,reverse:g};window.location.hash="#"+a},hijackLinks:function(){return this.each(function(){var a=b(this);if("back"==a.data("rel")){var e=function(a){window.history.back();a.preventDefault()};a.on("click",e);
a.on("tap",e)}else{var g=a.attr("data-href")||a.attr("href")||a.attr("action")||"#";if("#"===g.charAt(0)){if(b('a[name="'+g.slice(1)+'"]').length){x[g]=!0;return}}else g="#"+g,a.is("a")?a.attr("href",g):a.attr("action")&&a.attr("action",g),a.attr("data-href")&&a.attr("data-href",g);a.is("a")?e=function(){c={element:a}}:a.is("form")?(e=function(b){c={element:a};window.location.href=g;b.preventDefault()},a.on("submit",e)):e=function(){c={element:a};window.location.href=g};a.is("form")||(a.on("click",
e),a.on("tap",e))}})},changePage:function(a,e,g,f){var c={toPage:a,back:g},d=b.Event("pagebeforechange");b(this).trigger(d,c);if(!d.defaultPrevented){a=c.toPage;g=c.back;var d="string"===typeof a?a:a.url,j=null,p=b("div.ui-page-active"),k=!1;if("string"===typeof a&&"#"===a.charAt(0)){var h=b(s(a));h.length?(b(this).transition("perform",p,h,e,g,f,c),k=!0):!m.domCache&&q[a]?(j=a,a=q[a]):a=a.slice(1)}if(!k){var n={href:d,element:b(this),back:g},d=b.Event("pagebeforeload");b(this).trigger(d,n);var l=
b(this);d.defaultPrevented||(b(this).transition("load",a,n,function(a,d,h){d=b('<div data-role="page-container" />');d.html(a);b(document.body).append(d);a=b(d).transition("init",n,j,h);b(l).transition("perform",p,a,e,g,f,c)}),k=!0)}k||b(this).trigger("pagechangefailed",c)}},load:function(a,e,g){a="string"===typeof a?{url:a,dataType:"html",global:!1}:a;a.url||(a.url=window.location.href);a.success=function(f,c,d){e.xhr=d;e.textStatus=c;w=a.url;m.domCache||b('div[data-role="page"]').not('[data-dom-cache="true"]').addClass("transition-recyclable");
d=f.search(/<body/i);var j=f;c=f;var p;-1!=d&&(j=f.slice(0,d),d=f.indexOf(">",d),bodyEnd=f.search(/<\/body>/i),c=f.slice(d+1,bodyEnd));(d=j.match(/<title>(.+)<\/title>/im))&&(p=d[1]);if(window.location.hash){d=window.location.pathname;var k=window.location.hash.slice(1),j="",h=k.lastIndexOf("/");if(-1!=h&&(j=k.slice(0,h+1),"/"==j.charAt(0))){"/"==!d.charAt(0)&&(d="/"+d);h=k=1;do h=j.indexOf("/",h)+1,h>k&&j.slice(0,h)==d.slice(0,h)&&(k=h);while(0<h&&h==k);var n="",h=k;do h=d.indexOf("/",h+1),-1!=h&&
(n+="../");while(-1!=h);j=n+j.slice(k)}d=j;d.length&&(c=c.replace(/(\b(src|href|action))="([^"#:]+)"/gi,'$1="'+d+'$3"'),c=c.replace(/(\b(src|href|action))="(.+\/)?[^\/]+\/\.\.\//gi,'$1="$3'))}g(c,f,p)};a.error=function(c,g,d){e.xhr=c;e.textStatus=g;e.errorThrown=d;b(this).trigger("pageloadfailed",e);b(this).trigger("pagechangefailed",{toPage:a.url})};b.ajax(a)},perform:function(a,e,c,f,l,d){d.from=a;d.to=e;a.trigger("pagebeforehide",a);e.trigger("pagebeforeshow",e);window.setTimeout(function(){a.addClass(c+
" out");a.removeClass("ui-page-active");var b=e.position();e.css({top:b.top-l});e.show();e.addClass(c+" in");e.addClass("ui-page-active");f&&(a.addClass("reverse"),e.addClass("reverse"))},1);window.setTimeout(function(){a.removeClass(c+" out");e.removeClass(c+" in");a.removeClass("reverse");e.removeClass("reverse");e.css({top:0});window.scrollTo(0,l);var f=e.data("title");f&&(document.title=f);a.trigger("pagehide",a);e.trigger("pageshow",e);b(document).trigger("pagechange",d);b('div[data-role="page"]').hide();
e.show();m.domCache||(b("div.transition-recyclable").each(function(){var a=b.Event("pageremove");b(this).trigger(a,b(this));a.defaultPrevented||b(this).remove()}),b('div[data-role="page-container"]').not(function(){return b(this).children().length}).remove())},707)}};b.fn.transition=function(a){if(u[a])return u[a].apply(this,Array.prototype.slice.call(arguments,1));if("object"===typeof a||!a)return u.to.apply(this,arguments);throw"Method "+a+" does not exist";}})(Zepto);